<!doctype html> <html lang=en> <head> <meta charset=utf-8 /> <title>Ruby Programming: Part 4 — ejelome</title> <meta content="Ruby Programming: Part 4" name=title /> <meta content="Page 4 of 4 summary of The Pragmatic Studio's 23-Day Course Plan of the Ruby Programming course." name=description /> <meta content=ejelome name=author /> <meta content="width=device-width,initial-scale=1" name=viewport /> <link href=/img/favicon.ico rel="shortcut icon" type=image/x-icon /> <link href=https://ejelome.com/blog/ruby-programming-part-4 rel=canonical /> <script>var script=document.createElement("script");function gtag(){dataLayer.push(arguments)}script.src="//googletagmanager.com/gtag/js?id=UA-144170438-1",document.head.appendChild(script),window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-144170438-1")</script> <script src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js async data-ad-client=ca-pub-3560971753878587></script> <link href=/css/styles.css rel=stylesheet /> </head> <body class=posts> <div class=wrapper> <div class=header> <a href=/ class=navbar-brand> <img alt=ejelome class=site-logo height=64 src=/img/logo.png width=64 /> </a> <div class=site-info> <a href=/ class=site-title>ejelome</a> <p class=site-tagline>Research, Design and Development</p> </div> <ul class=social-media> <li class=github> <a href=https://github.com/ejelome rel=nofollow class=btn data-placement=top data-toggle=tooltip title="GitHub Profile"> <i class="fa-2x fab fa-github"> </i> </a> </li> <li class=youtube> <a href=https://www.youtube.com/channel/UCgqy7fcflZb5hhfLAUmlc5g rel=nofollow class=btn data-placement=top data-toggle=tooltip title="Youtube Channel"> <i class="fa-2x fab fa-youtube"> </i> </a> </li> <li class=linkedin> <a href=https://linkedin.com/in/ejelome rel=nofollow class=btn data-placement=top data-toggle=tooltip title="LinkedIn Profile"> <i class="fa-2x fab fa-linkedin"> </i> </a> </li> </ul> </div> <div class=siri-container> </div> <div class="nav site-nav"> <ul class=list-inline> <li class=list-inline-item> <a href=/ >Home</a> </li> <li class=list-inline-item> <a href=/about>About</a> </li> <li class=list-inline-item> <a href=/archives>Archives</a> </li> </ul> </div> <div class="breadcrumb breadcrumbs"> <a href=/ >Home</a> <span class=separator> <i class="separator fa-caret-right fas"> </i> </span> <a href=/blog>Blog</a> <span class=separator> <i class="separator fa-caret-right fas"> </i> </span> <strong class=active>Ruby Programming: Part 4</strong> </div> <div class=main> <div class=sidebar> <div class="sticky-top toc"> <strong>Table of Contents</strong> </div> </div> <div class=content> <h1>Ruby Programming: Part 4</h1> <div class=post-content> <div class=post-meta> <span class=author> <i class="fas fa-user"> </i> <a href=/about#about data-toggle=tooltip data-placement=top>ejelome</a> </span> <span class=separator>/</span> <span class=published> <i class="fa-clock far"> </i> <time data-placement=top data-toggle=tooltip datetime=2019-09-08T00:00Z title="Published Date">September 8, 2019</time>  <span class=separator>/</span> <span class=tags> <i class="fas fa-tags"> </i> <a href=/tags/programming-language class=tag data-placement=top data-toggle=tooltip title="Posts tagged with programming-language">programming-language</a> <span class=separator>▪</span> <a href=/tags/research class=tag data-placement=top data-toggle=tooltip title="Posts tagged with research">research</a> <span class=separator>▪</span> <a href=/tags/ruby class=tag data-placement=top data-toggle=tooltip title="Posts tagged with ruby">ruby</a> </span> </div> <div class="jumbotron post-summary"> <h2>Summary</h2> <p> This document is the continuation of Ruby Programming: Part 3 and will be about 1) custom iterators, 2) input and output, 3) inheritance, 4) mixins and 5) distribution. </p> </div> <hr/> <div class=content-block> <p><strong>Note:</strong> This is the continuation of <a href=ruby-programming-part-3 rel=nofollow>Ruby Programming: Part 3</a>.</p><p>This document will be the summary of page 4, the last page, from the course outline, <a href=https://pragmaticstudio.s3.amazonaws.com/courses/ruby/PragStudioRubyPlan.pdf rel=nofollow>23-Day Course Plan</a> of <a href=https://pragmaticstudio.com rel=nofollow>The Pragmatic Studio</a>'s <a href=https://pragmaticstudio.com/courses/ruby rel=nofollow>Ruby Programming</a> course.</p><h2>Custom Iterators</h2><ul><li>Use the keyword <code>yield</code> to call a block:<pre><code class=ruby> > def fn
?>   yield
?> end
=> :fn

 > fn { "hello world" }
=> "hello world"
</code></pre></li><li><code>yield</code> requires a given block:<pre><code class=ruby> > fn
LocalJumpError (no block given (yield))
</code></pre></li><li>Use the <code>block_given?</code> method to check if a block is given:<pre><code class=ruby> > def fn
?>   if block_given?
?>     yield
?>   else
?>     "no block given"
?>  end
?> end
=> :fn

 > fn { "hello world" }
=> "hello world"

 > fn
=> "no block given"
</code></pre></li><li><code>yield</code> can have zero or more parameters:<pre><code class=ruby> > def fn(param_1, param_2)
?>   yield(param_1, param_2)
?> end
=> :fn

 > fn("hello", "world") { |param_1, param_2| "#{param_1} #{param_2}" }
=> "hello world"
</code></pre></li></ul><h2>Input / Output</h2><h3 id=i/o_in_shell>I/O in shell</h3><ul><li>Use the <code>gets</code> method to return the next line from the standard input:<pre><code class=ruby> > gets
1
=> "1\n"
</code></pre></li><li>Use the <code>chomp</code> method to remove trailing new lines:<pre><code class=ruby> > gets.chomp
1
=> "1"
</code></pre></li><li>Assign the returned line from the <code>gets</code> method for re-use:<pre><code class=ruby> > x = gets.chomp
1
=> "1"

 > puts "x is #{x}"
x is 1
=> nil
</code></pre></li><li>Use the <code>ARGV</code> Array to read arguments passed from the shell:<ol><li>Create the program file:<pre><code class=shell>$ echo '
puts "I have #{ARGV.size} arguments."
' > program.rb
</code></pre></li><li>Run the program file with arguments:<pre><code class=shell>$ ruby program.rb foo bar baz
I have 3 arguments.
</code></pre></li></ol></li></ul><h3 id=i/o_in_file>I/O in file</h3><p><strong>Create a dummy file:</strong></p><pre><code class=shell>$ echo '
hello,
world
' > file.ext
</code></pre><ul><li>Use the <code>File</code> class with the <code>open</code> method to open a file:<pre><code class=ruby> > File.open("file.ext")
=> #&lt;File:file.ext>
</code></pre></li><li>Use the <code>close</code> method to close an opened file that was assigned to a variable:<pre><code class=ruby> > f = File.open("file.ext")
=> #&lt;File:file.ext>

 > f.close
=> nil

 > f
=> #&lt;File:file.ext (closed)>
</code></pre></li><li>Use a block to omit assignment and manually closing a file:<pre><code class=ruby> > File.open("file.ext") do |file|
?> end
=> nil
</code></pre></li><li>Use the <code>each_line</code> method to iterate a file object:<pre><code class=ruby> > File.open("file.ext") do |file|
?>   f.each_line do |line|
?>     puts line
?>   end
?> end

hello,
world

=> #&lt;File:file.ext (closed)>
</code></pre></li><li>Use the <code>readlines</code> and <code>each</code> methods to directly iterate a file object:<pre><code class=ruby> > File.readlines("file.ext").each do |line|
?>   puts line
?> end

hello,
world

=> ["\n", "hello,\n", "world\n", "\n"]
</code></pre></li><li>Use the <code>puts</code> method of the file object with <code>"w"</code> mode to write to a file:<pre><code class=ruby> > File.open("file.ext", "w") do |file|
?>   file.puts("foo bar baz")
?> end
=> nil
</code></pre></li><li>Use the <code>"w+"</code> mode to read an opened file object in write-mode:<pre><code class=ruby> > # Using just "w" as mode prohibits reading:
 > f = File.open("file.ext", "w")
=> #&lt;File:file.ext>
 > f.readlines
IOError (not opened for reading)

 > # Using "w+" as mode allows reading:
 > f = File.open("file.ext", "w+")
=> #&lt;File:file.ext>
 > f.readlines
=> []
</code></pre></li></ul><h2>Inheritance</h2><ul><li>Use the <code>&lt;</code> notation to subclass (the child class) from a parent class:<pre><code class=ruby> > class Cls1
?> end
=> nil

 > class Cls2 &lt; Cls1
?> end
=> nil
</code></pre></li><li>The child class inherits all the methods and attributes of the parent class:<pre><code class=ruby> > class Cls1
?>   attr_accessor :param
?>
?>   def initialize(param)
?>     @param = param
?>   end
?>
?>   def to_s
?>     "#&lt;class=\"#{self.class.name}\" @param=\"#{@param}\">"
?>   end
?> end
=> :to_s

 > class Cls2 &lt; Cls1
?> end
=> nil

 > inst = Cls2.new("arg")
=> #&lt;Cls2:0x000055eed169a670 @param="arg">
 > inst.param
=> "arg"
 > inst.to_s
=> "#&lt;class=\"Cls2\" @param=\"arg\">"
</code></pre></li><li>The child class can override the methods of the parent class:<pre><code class=ruby> > class Cls1
?>   def fn
?>     "foo"
?>   end
=> :fn

 > class Cls2 &lt; Cls1
?>   def fn
?>     "bar"
?>   end
=> :fn

 > inst = Cls2.new
=> #&lt;Cls2:0x000055eed169a670>
 > inst.fn
=> "bar"
</code></pre></li><li>Use the <code>super</code> method to initialize the parent class' attributes:<pre><code class=ruby> > Class Cls1
?>   attr_accessor :p_param
?>
?>   def initialize(p_param)
?>     @p_param = p_param
?>   end
?> end
=> :initialize

 > Class Cls2 &lt; Cls1
?>   attr_accessor :p_param
?>
?>   def initialize(p_param, c_param)
?>     super(p_param)
?>     @c_param = c_param
?>   end
?> end
=> :initialize

 > inst = Cls2.new("foo", "bar")
=> #&lt;Cls2:0x000055eed169a670 @p_param="foo", @c_param="bar">
 > inst.p_param
=> "foo"
 > inst.c_param
=> "bar"
</code></pre></li><li>Use the <code>super</code> method to call the method of the parent class:<pre><code class=ruby> > class Cls1
?>   def fn
?>     "hello"
?>   end
?> end
=> :fn

 > class Cls2 &lt; Cls1
?>   def fn
?>     super
?>   end
?> end
=> :fn

 > inst = Cls1.new
=> #&lt;Cls2:0x000055eed169a670>
 > inst.fn
=> "hello"
</code></pre></li><li>An example of polymorphism thru inheritance: <br/> <strong>Note:</strong> In this example, <code>Man</code> and <code>Woman</code> are many (poly) forms (morph) of <code>Human</code>.<pre><code class=ruby> > class Human
?>   def mortal?
?>     true
?>  end
=> :mortal?

 > class Man &lt; Human
?>   def fn
?>     "A man leads, provides and protects"
?>   end
?> end
=> :fn

 > class Woman &lt; Human
?>   def fn
?>     "A woman supports, manages and nurtures"
?>   end
?> end
=> :fn
</code></pre></li><li>Use the <code>superclass</code> method to get the parent of a class<pre><code class=ruby> > Man.superclass
=> Human

 > Woman.superclass
=> Human
</code></pre></li><li>Use the <code>ancestors</code> method to get the class hierarchy of a class<pre><code class=ruby> > Man.ancestors
=> [Man, Human, Object, Kernel, BasicObject]

 > Woman.ancestors
=> [Woman, Human, Object, Kernel, BasicObject]
</code></pre></li><li>Use the <code>is_a?</code> or <code>kind_of?</code> to check if an object belongs to a class: <br/> <strong>Note:</strong> <code>is_a?</code> and <code>kind_of?</code> methods point the the same <code>C</code> function (<a href=https://github.com/ruby/ruby/blob/trunk/object.c#L471https://github.com/ruby/ruby/blob/trunk/object.c#L4601 rel=nofollow><code>rb_obj_is_kind_of</code></a>).<pre><code class=ruby> > class Cls1
?> end
=> nil

 > class Cls2 &lt; Cls1
?> end
=> nil

 > o = Cls2.new
=> #&lt;Cls2:0x000055eed169a670>
 > o.is_a? Cls2   # direct class (o.class)
=> true
 > o.is_a? Cls1   # parent class (o.class.superclass)
=> true
 > o.is_a? Object # grand parent class (o.class.superclass.superclass)
=> true
</code></pre></li></ul><p><strong>Notes:</strong></p><ul><li>Inheritance is the basic form of polymorphism (different classes sharing a superclass)</li><li>Polymorphism is sending the same message to different objects to get different results</li></ul><h2>Mixins</h2><ul><li>Use the <code>include</code> method to mixin a module:<pre><code class=ruby> > module Mdl
?>   def fn
?>     "mixin"
?>   end
?> end
=> :fn

 > class Cls
?>   include Mdl
?> end
=> Cls

 > inst = Cls.new
=> #&lt;Cls:0x0000564dda0a9ff0>
 > inst.fn
=> "mixin"
</code></pre></li><li>A mixin sits between the class it is mixed in and the class' superclass:<pre><code class=ruby> > module Mdl
?> end
=> nil

 > class Cls
?>   include Mdl
?> end
=> Cls

 > Cls.ancestors  # Mdl is between Cls and Object
=> [Cls, Mdl, Object, Kernel, BasicObject]

 > Cls.superclass # but it is not Cls' superclass
=> Object
</code></pre></li><li>A module can access a class' attributes where it is mixed in:<pre><code class=ruby> > module Mdl
?>   def fn
?>     "hello #{@param}"
?>   end
?> end
=> :fn

 > class Cls
?>   attr_accessor :param
?>
?>   def initialize(param)
?>     @param = param
?>   end
?> end
=> :initialize

 > inst = Cls.new("world")
=> #&lt;Cls:0x0000564dda0a9ff0 @param="world">
 > inst.fn
=> "hello world"
</code></pre></li><li>Although it's a much better practice to use attributes and methods directly in modules:<pre><code class=ruby> > module Mdl
?>   def fn
?>     "hello #{self.param}"
?>   end
?> end
=> :fn

 > class Cls
?>   attr_accessor :param
?>
?>   def initialize(param)
?>     @param = param
?>   end
?> end
=> :initialize

 > inst = Cls.new("world")
=> #&lt;Cls:0x0000564dda0a9ff0 @param="world">
 > inst.fn
=> "hello world"
</code></pre></li></ul><p><strong>Notes:</strong></p><ul><li>Mixins are used to share code that is not related to any class hierarchy</li><li>Ruby don't support multiple inheritance but uses mixins as controlled multiple-inheritance-like</li><li>While inheritance is for modeling class relationships, think of mixins for sharing class behaviors</li></ul><h2>Distribution</h2><h3 id="rubygems'_bundler">RubyGems' bundler</h3><ol><li>Install <code>bundler</code>:<pre><code class=shell>$ gem install bundler
</code></pre></li><li>Create RubyGems structure:<pre><code class=shell>$ bundle gem &lt;project>
</code></pre></li><li>Then modify <code>&lt;project>/&lt;project>.gemspec</code> file</li></ol><h3 id=rubygems_structure>RubyGems structure</h3><pre><code class=shell>&lt;project>/
├── README.md         # usage instructions
├── LICENSE.txt       # terms of use
├── &lt;project>.gemspec # project details
├── Gemfile           # gem dependencies
├── Rakefile          # Ruby's Makefile (run via rake)
├── bin/              # shell executables
│   ├── console
│   └── setup
├── lib/              # project source files
│   ├── &lt;project>/
│   │   └── version.rb
│   └── &lt;project>.rb
├── spec/             # project test files
│   ├── &lt;project>_spec.rb
│   └── spec_helper.rb
├── .rspec            # RSpec configuration file
└── .travis.yml       # Travis CI configuration file
</code></pre><h3 id=publishing_a_gem>Publishing a gem</h3><ol><li><a href=https://rubygems.org/sign_up rel=nofollow>Sign up</a> on <a href=https://rubygems.org rel=nofollow>RubyGems.org</a></li><li>You will receive an e-mail confirmation (click <code>VERIFY</code> to confirm to be logged in)</li><li>Build the project to make a gem:<pre><code class=shell>$ gem build &lt;project>.gemspec
  Successfully built RubyGem
  Name: &lt;project>
  Version: &lt;version>
  File: &lt;project>-&lt;version>.gem
</code></pre></li><li>Publish the gem:<pre><code class=shell>$ gem push &lt;project>-&lt;version>.gem
Pushing gem to https://rubygems.org...
Successfully registered gem: &lt;project> (&lt;version>)
</code></pre></li></ol><h3 id=reviewing_a_gem>Reviewing a gem</h3><ol><li>Search the gem:<pre><code class=shell>$ gem search -r &lt;project>

*** REMOTE GEMS ***

&lt;project> (&lt;version>)
</code></pre> <strong>Note:</strong> <code>-r</code> restricts operation to the REMOTE domain</li><li>Install the gem:<pre><code class=shell>$ gem install &lt;project>
Successfully installed &lt;project>-&lt;version>
Parsing documentation for &lt;project>-&lt;version>
Installing ri documentation for &lt;project>-&lt;version>
Done installing documentation for &lt;project> after 0 seconds
1 gem installed
</code></pre></li><li>Check if gem is installed:<pre><code class=shell>$ gem list &lt;project> -d

*** LOCAL GEMS ***

&lt;project> (&lt;version>)
    Author: &lt;author>
    Homepage: &lt;homepage>
    License: &lt;license>
    Installed at: &lt;path>

    &lt;summary>
</code></pre> <strong>Note:</strong> <code>-d</code> displays the detailed information of the gem</li><li>Uninstall the gem:<pre><code class=shell>$ gem uninstall &lt;project>
Successfully uninstalled &lt;project>-&lt;version>
</code></pre></li></ol><p><strong>Congratulations!</strong> We've finally finished the course and learned enough <code>Ruby</code> :)</p> </div> </div> <div class=pagination> <a href=/blog/ruby-on-rails-6-week-1 class="btn btn-outline-secondary previous"> <i class="fas fa-angle-left"> </i> Ruby on Rails 6: Week 1 </a> <div class=separator> <i class="fas fa-yin-yang"> </i> </div> <a href=/blog/ruby-programming-part-3 class="btn btn-outline-secondary next">Ruby Programming: Part 3 <i class="fas fa-angle-right"> </i> </a> </div> <hr/> <div class=post-comments> <h2>Comments</h2> <div id=disqus_thread> </div> <script>var disqus_config=function(){this.page.url="https://ejelome.com/blog/ruby-programming-part-4",this.page.identifier="Ruby Programming: Part 4"};!function(){var e=document,t=e.createElement("script");t.src="//ejelome.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}()</script> <noscript>Please enable JavaScript to view the <a href=//disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a> </noscript> </div> </div> </div> </div> <div class=footer> <p>Copyright © 2019 <a href=/ >ejelome</a>. Some rights reserved. </p> </div> <script src=/js/scripts.js></script> </body> </html> 