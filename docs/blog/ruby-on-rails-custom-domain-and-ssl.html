<!doctype html> <html lang=en> <head> <meta charset=utf-8 /> <title>Ruby on Rails: Custom Domain and SSL — ejelome</title> <meta content="Ruby on Rails: Custom Domain and SSL" name=title /> <meta content="Deploy Rails app on Heroku to a user-facing endpoint." name=description /> <meta content=ejelome name=author /> <meta content="width=device-width,initial-scale=1" name=viewport /> <link href=/img/favicon.ico rel="shortcut icon" type=image/x-icon /> <link href=https://ejelome.com/blog/ruby-on-rails-custom-domain-and-ssl rel=canonical /> <script>var script=document.createElement("script");function gtag(){dataLayer.push(arguments)}script.src="//googletagmanager.com/gtag/js?id=UA-144170438-1",document.head.appendChild(script),window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-144170438-1")</script> <script src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js async data-ad-client=ca-pub-3560971753878587></script> <link href=/css/styles.css rel=stylesheet /> </head> <body class=posts> <div class=wrapper> <div class=header> <a href=/ class=navbar-brand> <img alt=ejelome class=site-logo height=64 src=/img/logo.png width=64 /> </a> <div class=site-info> <a href=/ class=site-title>ejelome</a> <p class=site-tagline>Research, Design and Development</p> </div> <ul class=social-media> <li class=github> <a href=https://github.com/ejelome class=btn data-placement=top data-toggle=tooltip title="GitHub Profile" rel=nofollow> <i class="fa-2x fab fa-github"> </i> </a> </li> <li class=youtube> <a href=https://www.youtube.com/channel/UCgqy7fcflZb5hhfLAUmlc5g class=btn data-placement=top data-toggle=tooltip title="Youtube Channel" rel=nofollow> <i class="fa-2x fab fa-youtube"> </i> </a> </li> <li class=linkedin> <a href=https://linkedin.com/in/ejelome class=btn data-placement=top data-toggle=tooltip title="LinkedIn Profile" rel=nofollow> <i class="fa-2x fab fa-linkedin"> </i> </a> </li> </ul> </div> <div class=siri-container> </div> <div class="nav site-nav"> <ul class=list-inline> <li class=list-inline-item> <a href=/ >Home</a> </li> <li class=list-inline-item> <a href=/about>About</a> </li> <li class=list-inline-item> <a href=/archives>Archives</a> </li> </ul> </div> <div class="breadcrumb breadcrumbs"> <a href=/ >Home</a> <span class=separator> <i class="separator fa-caret-right fas"> </i> </span> <a href=/blog>Blog</a> <span class=separator> <i class="separator fa-caret-right fas"> </i> </span> <strong class=active>Ruby on Rails: Custom Domain and SSL</strong> </div> <div class=main> <div class=sidebar> <div class="sticky-top toc"> <strong>Table of Contents</strong> </div> </div> <div class=content> <h1>Ruby on Rails: Custom Domain and SSL</h1> <div class=post-content> <div class=post-meta> <span class=author> <i class="fas fa-user"> </i> <a href=/about#about data-placement=top data-toggle=tooltip>ejelome</a> </span> <span class=separator>/</span> <span class=published> <i class="fa-clock far"> </i> <time data-placement=top data-toggle=tooltip datetime=2019-10-27T00:00Z title="Published Date">October 27, 2019</time>  <span class=separator>/</span> <span class=tags> <i class="fas fa-tags"> </i> <a href=/tags/deployment class=tag data-placement=top data-toggle=tooltip title="Posts tagged with deployment">deployment</a> <span class=separator>▪</span> <a href=/tags/heroku class=tag data-placement=top data-toggle=tooltip title="Posts tagged with heroku">heroku</a> <span class=separator>▪</span> <a href=/tags/lets-encrypt class=tag data-placement=top data-toggle=tooltip title="Posts tagged with lets-encrypt">lets-encrypt</a> <span class=separator>▪</span> <a href=/tags/namecheap class=tag data-placement=top data-toggle=tooltip title="Posts tagged with namecheap">namecheap</a> </span> </div> <div class="jumbotron post-summary"> <h2>Summary</h2> <p>This guide aims to make a deployed Rails app on Heroku to point to a user-facing endpoint.</p> </div> <hr/> <div class=content-block> <p>Once we have a deployed Rails app on Heroku, it would more pleasant if users (including us) can have a unique presence on the web.</p><p>At the end of this guide, we'll have a unique endpoint using a custom domain from Namecheap with a free SSL from Let’s Encrypt.</p><h2>Custom Domain</h2><p><strong>Note:</strong> A verified Heroku account is required (see <a href=https://devcenter.heroku.com/articles/account-verification#how-to-verify-your-heroku-account rel=nofollow>How to verify your Heroku account</a>).</p><h3 id=heroku>Heroku</h3><ol><li><a href=https://id.heroku.com/login rel=nofollow>Login</a></li><li>Go to app's <strong>Settings</strong> (<code>/apps/&lt;app>/settings</code>)</li><li>On <strong>Domains</strong>, click <strong>Add domain</strong></li><li>On <strong>Domain name</strong>, type domain (e.g. <code>&lt;app>.&lt;tld></code>)</li><li>Click <strong>Next</strong></li><li>Copy the generated characters from <strong>DNS target</strong></li></ol><h3 id=namecheap>Namecheap</h3><ol><li><a href=https://www.namecheap.com/myaccount/login rel=nofollow>Login</a></li><li>Go to domain's <strong>Advance DNS</strong> (<code>/Domains/DomainControlPanel/&lt;domain>/advancedns</code>)</li><li>On <strong>HOST RECORDS</strong>, click <strong>ADD NEW RECORD</strong></li><li>On <strong>Type</strong>, select <code>ALIAS Record</code></li><li>On <strong>Host</strong>, type <code>@</code></li><li>On <strong>Value</strong>, type the generated characters from Heroku</li><li>Click the checkbox icon to save</li><li>Remove default <strong>HOST RECORDS</strong><ul><li><code>parkingpage.namecheap.com</code></li><li><code>http://www.&lt;domain>/?from</code></li></ul></li></ol><h3 id=www_subdomain>www subdomain</h3><p>Do the same steps for <code>www</code>, except:</p><ul><li>On <strong>Domain name</strong>, prefix domain with <code>www.</code> (e.g. <code>www.&lt;app>.&lt;tld></code>)</li><li>On <strong>Type</strong>, select <code>CNAME Record</code></li><li>On <strong>Host</strong>, type <code>www</code></li></ul><p>Visiting the following URLs should go to the <code>&lt;app></code>:</p><ul><li><code>&lt;domain></code></li><li><code>http://&lt;domain></code></li></ul><h2>SSL</h2><h3 id=heroku>Heroku</h3><ol><li>Go to app's <strong>Resources</strong> (<code>/apps/&lt;app>/resources</code>)</li><li>On <strong>Free Dynos</strong>, click <strong>Change Dyno Type</strong></li><li>On <strong>Select Tier</strong>, select <strong>Hobby</strong>, then click <strong>Save</strong></li><li>Go back to app's <strong>Settings</strong> (<code>/apps/&lt;app>/settings</code>)</li><li>On <strong>SSL certificates</strong>, click <strong>Configure SSL</strong></li><li>Select <strong>Automatically ...</strong>, then click <strong>Continue</strong></li><li>Click <strong>I've done this</strong></li><li>Click <strong>Continue</strong></li></ol><p>Visiting <code>https://&lt;domain></code> should go to the SSL-enabled <code>&lt;app></code>.</p><h2>Redirect non-https to https</h2><h3 id=ruby_on_rails>Ruby on Rails</h3><ol><li>Update <code>production.rb</code>:<pre><code class=ruby># File: config/environments/production.rb
...
config.force_ssl = true
...
</code></pre></li></ol><p>Visiting <code>http://&lt;domain></code> should redirect to <code>https://&lt;domain></code>.</p><h2>Redirect www to non-www</h2><h3 id=ruby_on_rails>Ruby on Rails</h3><ol><li>Update <code>config/routes.rb</code>:<pre><code class=ruby># File: config/routes.rb
Rails.application.routes.draw do
  # For details on the DSL available within this file, see https://guides.rubyonrails.org/routing.html
  match '(*any)',
        to: redirect(subdomain: ''),
        via: :all,
        constraints: { subdomain: 'www' }
  ...
end
</code></pre></li></ol><p>Visiting <code>www.&lt;domain></code> should redirect to <code>&lt;domain></code>.</p><p><strong>Congratulations!</strong> We now have a live Rails app with Custom Domain and SSL :)</p> </div> </div> <div class=pagination> <a href=/blog/ruby-on-rails-6-week-5 class="btn btn-outline-secondary previous"> <i class="fas fa-angle-left"> </i> Ruby on Rails 6: Week 5 </a> <div class=separator> <i class="fas fa-yin-yang"> </i> </div> <a href=/blog/ruby-on-rails-ci-cd class="btn btn-outline-secondary next">Ruby on Rails: CI / CD <i class="fas fa-angle-right"> </i> </a> </div> <hr/> <div class=post-comments> <h2>Comments</h2> <div id=disqus_thread> </div> <script>var disqus_config=function(){this.page.url="https://ejelome.com/blog/ruby-on-rails-custom-domain-and-ssl",this.page.identifier="Ruby on Rails: Custom Domain and SSL"};!function(){var e=document,t=e.createElement("script");t.src="//ejelome.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}()</script> <noscript>Please enable JavaScript to view the <a href=//disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a> </noscript> </div> </div> </div> </div> <div class=footer> <p>Copyright © 2019 <a href=/ >ejelome</a>. Some rights reserved. </p> </div> <script src=/js/scripts.js></script> </body> </html> 